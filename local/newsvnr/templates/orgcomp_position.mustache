
<div class="orgcomp-position">
	<div class="container-fuld">
		<div class="row">
			<div class="col-md-3">

				<select class="form-control" id="orgstructure">

					<option disabled selected="selected" value="">{{#str}}selectorgstructure,local_newsvnr{{/str}}</option>
					{{#orgstructure}}

					<option value="{{id}}"  >{{name}}</option>

					{{/orgstructure}}


				</select>
			</div>
			
			<div class="col-md-3">
				<select class="form-control" id="orgstructure_position">

				</select>
			</div>

		</div>


		<ul class="nav nav-tabs">
		    <li class="nav-item">
		        <a href="#org_comp_position" class="nav-link active" data-toggle="tab">{{#str}}competencymanagement,local_newsvnr{{/str}}</a>
		    </li>
		    <li class="nav-item">
		        <a href="#org_template_plan" class="nav-link" data-toggle="tab">{{#str}}planmanagement,local_newsvnr{{/str}}</a>
		    </li>

		</ul>
		<div class="tab-content">
		    <div class="tab-pane fade show active"  id="org_comp_position">

			    <div class="col-md-3" style="margin: 20px 0;">	
					<button  name="" type="button" id="add_competency" class="btn btn-primary" data-toggle="modal" data-target="#myModal" disabled="disabled" >{{#str}}add_buildcompetency,local_newsvnr{{/str}}</button>

				</div>

		       	<div class="row">
					<div class="col-md-12">
						<div data-region="orgcomp-position">
						
					</div>
					</div>
				</div>

		    </div>
		    <div class="tab-pane fade" id="org_template_plan">
		       		
		       <div class="col-md-3" style="margin: 20px 0;">	

					<button  name="" type="button" disabled="disabled"  id="add_planning" class="btn btn-primary" data-toggle="modal" data-target="#myModal1"  >{{#str}}add_buildplan,local_newsvnr{{/str}}</button>
			

				</div>	


				<div class="row">
					<div class="col-md-12">
						<div data-region="orgcomp-plan">
						
						</div>
					</div>
				</div>


		    </div>

		</div>

		<div class="row">

							
		<!-- The Modal Add Competency -->
			   <div class="modal fade" id="myModal">
			    	<div class="modal-dialog modal-xl">

					      <div class="modal-content" >
					      
						        <!-- Modal Header -->
						        <div class="modal-header">
						          <h4 class="modal-title">{{#str}}addcompetency,local_newsvnr{{/str}}</h4>

						        </div>
						        
						        <!-- Modal body -->
						        <div class="modal-body">
						   				<div class="col-md-6 list-standard">
						   					<ul class="list-group">
											    {{#orgcomp_framework}}
											   	<li class="list-group-item comp"  id="{{id}}">{{shortname}}</li>
											    {{/orgcomp_framework}}


											  </ul>
										</div>
									
						   				<div class="col-md-6 comp-tree">
						   					<input placeholder="Nhập số thứ tự cho năng lực" class="form-control mb-1" pattern="[\d.\d]+[^\s]" title="Nhập thứ tự đúng định dạng: 1, 1.1,1.1.1" id="ordernumber" type="text" name="" required="">
						   					<input placeholder="Tìm kiếm..." class="form-control" id="value-item" type="text" name="" >

						   					<!-- Vẽ cây ở đây nha -->

						   					<div class="tree-view">
						   						<div id="tree-competency"></div>
						   					</div>
						   				</div>


						        </div>
						        
						        <!-- Modal footer -->
						        <div class="modal-footer">
						           <button type="button" id="save-add" class="btn btn-primary" >{{#str}}addnew,local_newsvnr{{/str}}</button>
						          <button type="button" class="btn btn-default" data-dismiss="modal">{{#str}}cancel,local_newsvnr{{/str}}</button>
						        </div>

					        
					      </div>



			    	</div>
			   </div>


			    <div class="modal fade" id="myModal1">
			    	<div class="modal-dialog modal-xl">

					      <div class="modal-content" >
					      
						        <!-- Modal Header -->
						        <div class="modal-header">
						          <h4 class="modal-title">{{#str}}addcompetency,local_newsvnr{{/str}}</h4>

						        </div>
						        
						        <!-- Modal body -->
						        <div class="modal-body">
						   				
						   			<form class="form" >

									    <div class="form-group">
									      <label class="control-label col-sm-2" for="email">{{#str}}name,local_newsvnr{{/str}}:</label>
									      <div class=" col-sm-10">

									        <input class="form-control" id="name"  >
									      </div>
									    </div>

									    <div class="form-group">
									      <label class="control-label col-sm-2" >{{#str}}description,local_newsvnr{{/str}}:</label>
									      <div class="col-sm-10">          
									        <textarea type="text" id="descript" class="form-control"   rows="5" > </textarea>
									      </div>
									    </div>

										<div class="form-group">
									      <label class="control-label col-sm-2" for="email">{{#str}}visible,local_newsvnr{{/str}}:</label>
									      <div class="col-sm-3">
									       		<select class="form-control" id="visible">
									       			<option value="1">1</option>
									       			<option value="0">0</option>
									       		</select>
									      </div>
									    </div>

									    <div class="form-group">
									      <label class="control-label col-sm-2" for="email">{{#str}}deadline,local_newsvnr{{/str}}:</label>
									      <div class="col-sm-5">
									       <label class="radio-inline">
											      <input type="radio" id="show-timeout" name="optradio" style="margin-right: 5px;" >{{#str}}yes,local_newsvnr{{/str}} 
											    </label>
											    <label class="radio-inline">
											      <input id="hidden-timeout" style="margin-right: 5px;" type="radio" name="optradio" checked>{{#str}}no,local_newsvnr{{/str}}
											    </label>
									      </div>
									    </div>

									     <div class="form-group" id="time-out" style="display: none;">
									        <label for="date-picker-2" class="control-label col-sm-2">{{#str}}day,local_newsvnr{{/str}}:</label>

									        <div class="col-sm-10" style="display: flex;">
									            <div class="input-group">
									                <input value="0" id="date-picker-2" type="text" class="date-picker form-control" />
									                <label for="date-picker-2" class="input-group-addon btn"><span class="glyphicon glyphicon-calendar"></span>

									                </label>
									            </div>

									             <label class="control-label col-sm-2"  for="hour">{{#str}}hour,local_newsvnr{{/str}}:</label>
									
										       		<select class="form-control col-sm-2" id="hour">
										      
										       		</select>

										       	 <label class="control-label col-sm-2" >{{#str}}minute,local_newsvnr{{/str}}:</label>
									
										       		<select class="form-control col-sm-2" id="minute">
										       			
										       		</select>
										
									        </div>
									    </div>

									    <!-- INFO USER -->
									    {{#user}}
									    	<input type="hidden" id="list-group-item" value="{{id}}" name="">
									    {{/user}}

									    <div class="form-group">
									      <label class="control-label col-sm-2" for="email">{{#str}}category,local_newsvnr{{/str}}:</label>
									      <div class="col-sm-10">
									          <label><b>{{#str}}system,local_newsvnr{{/str}}</b></label>
									      </div>
									    </div>
									 </form>	


						        </div>
						        
						        <!-- Modal footer -->
						        <div class="modal-footer">
						           <button type="button" id="save-planning" class="btn btn-primary" >{{#str}}addnew,local_newsvnr{{/str}}</button>
						          <button type="button" class="btn btn-default" data-dismiss="modal">{{#str}}cancel,local_newsvnr{{/str}}</button>
						        </div>

					        
					      </div>



			    	</div>
			   </div>

			<div class="group-modal">	
				
			</div>

		</div>


	</div>

</div>




 <link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css"
         rel = "stylesheet">
<script src = "https://code.jquery.com/jquery-1.10.2.js"></script>
<script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>


<script type="text/javascript">
	
        // DELETE COMPETENCY POSITION
    const DeleteCompPosition = (comp_postion_id,orgpositionid,competencyid) => {
    	require(['jquery', 'core/config'], ($, Config) => { 
    		var confm = confirm("Bạn muốn xóa trường này?");
                  var getURL = Config.wwwroot + '/local/newsvnr/ajax.php';

                  if(confm)
                  {         

                      $.ajax({
                        url: getURL,
                        method: "GET",
                        data: {
                          action: "delete",
                          orgpositionid: orgpositionid,
                          competencyid: competencyid,
                          comp_postion_id: comp_postion_id
                        },
                        success: function(result){
                         	
                        	if(result)
                        	{

                        		 $('#' + comp_postion_id).parents('tr').fadeOut(300, function(){
                                $('#' + comp_postion_id).remove();
                           		});
                        	}                    
                          
                        }
                      });
                  }
    	});
    }
    const maneger_enrol = (orgpositionid,competencyid) => {
    	require(['jquery', 'core/config'], ($, Config) => { 
    		var courseid = $("input[type=radio][name=list_course]:checked").attr('value');
          	var getURL = Config.wwwroot + '/local/newsvnr/ajax.php';
 			$.ajax({
                url: getURL,
                method: "GET",
                data: {
                  action: "orgmanager_enrol",
                  courseid: courseid,
                  orgpositionid: orgpositionid,
                  competencyid: competencyid
                }
              }).done(function(resp){
              		if(resp !== 'undefined') {
                		alert('Ghi danh thành công');
                	}
              });	

    	});
    }      
          
        $('.date-picker').datepicker({format: "dd.mm.yyyy"}); 

		$(".date-picker").on("change", function () {
		    var id = $(this).attr("id");
		    var val = $("label[for='" + id + "']").text();
		    $("#msg").text(val + " changed");
		});
          // DATE PICKER
    const rs_radiobtn = () => {
    	$('input[type=radio]').prop('checked', function () {
    		return this.getAttribute('checked') == 'checked';
		});
    }
     

</script>
{{#js}}
require(['jquery'], function($) {
   
     $('[data-toggle="tab"]').click(function(){
        setTimeout(function(){
                $('#page').find('.dataTable[role="grid"][aria-describedby]').DataTable().columns.adjust().draw();
        },500);
       
    });
});
{{/js}}