define(["jquery","core/config","core/str","kendo.all.min"],function(e,t,a,n){var r=function(e){return new n.data.DataSource({transport:{read:e.apiSettings,parameterMap:function(e,t){if("read"==t)return e.filter&&(e.q=e.filter.filters[0].value),e}},pageSize:10,serverPaging:!0,serverFiltering:!0,serverSorting:!0,schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"}}},total:function(e){if(null!=e&&e.length>0)return e[0].total}}})};return{initGrid:function(a){if(void 0===a.columns&&(a.columns=[]),a.selectData=function(t){for(var n=e("div[kendo-grid][k-options="+a.gridName+"]").getKendoGrid(),r=n.select(),l=[],o=0;o<r.length;o++)l.push(n.dataItem(r[o]));return l},a.selectId=function(t){for(var n=e("div[kendo-grid][k-options="+a.gridName+"]").getKendoGrid(),r=n.select(),l=[],o=0;o<r.length;o++)l.push(n.dataItem(r[o]).Id);return l},a.columns.unshift({selectable:!0,width:55}),null!=a.approvalModuleEvent){var n=function(n){n.preventDefault();var r=this.dataItem(e(n.currentTarget).closest("tr")),l=t.wwwroot+"/local/newsvnr/ajax/library_online/library_approval_module_ajax.php?action=approval",o={type:"POST",processData:!0,data:{moduleid:r.id}};e.ajax(l,o).then(function(){}),a.approvalModuleEvent(r)},l={click:n,text:" ",name:"approval",iconClass:"fa fa-check"};eventArr.push(l)}if(null!=a.deleteModuleEvent){var o={click:function(n){n.preventDefault();var r=this.dataItem(e(n.currentTarget).closest("tr")),l=t.wwwroot+"/local/newsvnr/ajax/library_online/library_approval_module_ajax.php?action=delete",o={type:"POST",processData:!0,data:{moduleid:r.id}};e.ajax(l,o).then(function(){}),a.deleteModuleEvent(r)},text:" ",name:"delete",iconClass:"fa fa-trash"};eventArr.push(o)}null!=a.editEvent&&(e.ajax(script,settings).then(function(){}),a.approvalModuleEvent(dataItem));l={click:n,text:" ",name:"approval",iconClass:"fa fa-check"};eventArr.push(l),null!=a.deleteModuleEvent&&(o={click:function(n){n.preventDefault();var r=this.dataItem(e(n.currentTarget).closest("tr")),l=t.wwwroot+"/local/newsvnr/ajax/library_online/library_approval_module_ajax.php?action=delete",o={type:"POST",processData:!0,data:{moduleid:r.id}};e.ajax(l,o).then(function(){}),a.deleteModuleEvent(r)},text:" ",name:"delete",iconClass:"fa fa-trash"},eventArr.push(o));if(null!=a.editEvent){var i={click:function(t){t.preventDefault();var n=this.dataItem(e(t.currentTarget).closest("tr"));a.editEvent(n)},text:" ",name:"edit",iconClass:"fa fa-pencil-square-o"};eventArr.push(i)}if(null!=a.deleteEvent){var s={click:function(t){t.preventDefault();var n=this.dataItem(e(t.currentTarget).closest("tr"));a.deleteEvent(n)},text:" ",name:"delete",iconClass:"fa fa-trash-o"};eventArr.push(s)}return a.columns.push({title:"Action",command:eventArr,width:100}),{dataSource:r(a),persistSelection:!0,groupable:!1,resizable:!0,toolbar:["search"],search:{fields:["name"]},pageable:{refresh:!0,pageSizes:!0,pageSizes:[10,20,50,100],buttonCount:5},columns:a.columns,noRecords:{template:"No Records"}}}}});