define(["jquery","core/config","core/str","kendo.all.min"],function(e,t,r,a){var n=function(e){return new a.data.DataSource({transport:{read:e.apiSettings,parameterMap:function(e,t){if("read"==t)return e.filter&&(e.q=e.filter.filters[0].value),e}},pageSize:10,serverPaging:!0,serverFiltering:!0,serverSorting:!0,schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"}}},total:function(e){if(null!=e&&e.length>0)return e[0].total}}})};return{initGrid:function(r){if(eventArr=[],void 0===r.columns&&(r.columns=[]),r.selectData=function(t){for(var a=e("div[kendo-grid][k-options="+r.gridName+"]").getKendoGrid(),n=a.select(),l=[],i=0;i<n.length;i++)l.push(a.dataItem(n[i]));return l},r.selectId=function(t){for(var a=e("div[kendo-grid][k-options="+r.gridName+"]").getKendoGrid(),n=a.select(),l=[],i=0;i<n.length;i++)l.push(a.dataItem(n[i]).Id);return l},void 0===r.selectable&&r.columns.unshift({selectable:!0,width:45}),null!=r.approvalModuleEvent){var a={click:function(a){a.preventDefault();var n=this.dataItem(e(a.currentTarget).closest("tr")),l=t.wwwroot+"/local/newsvnr/ajax/library_online/library_approval_module_ajax.php?action=approval",i={type:"POST",processData:!0,data:{moduleid:n.id}};e.ajax(l,i).then(function(){}),r.approvalModuleEvent(n)},text:" ",name:"approval",iconClass:"fa fa-check"};eventArr.push(a)}if(null!=r.viewCourseInfoPopupEvent){var l={click:function(t){t.preventDefault();var a=this.dataItem(e(t.currentTarget).closest("tr"));r.viewCourseInfoPopupEvent(a)},text:M.util.get_string("viewcourse","local_newsvnr"),name:M.util.get_string("viewcourse","local_newsvnr"),iconClass:""};eventArr.push(l)}if(null!=r.deleteModuleEvent){var i={click:function(a){a.preventDefault();var n=this.dataItem(e(a.currentTarget).closest("tr")),l=t.wwwroot+"/local/newsvnr/ajax/library_online/library_approval_module_ajax.php?action=delete",i={type:"POST",processData:!0,data:{moduleid:n.id}};e.ajax(l,i).then(function(){}),r.deleteModuleEvent(n)},text:" ",name:"delete",iconClass:"fa fa-trash"};eventArr.push(i)}if(null!=r.editEvent){var o={click:function(t){t.preventDefault();var a=this.dataItem(e(t.currentTarget).closest("tr"));r.editEvent(a)},text:" ",name:"edit",iconClass:"fa fa-pencil-square-o"};eventArr.push(o)}if(null!=r.deleteEvent){var s={click:function(t){t.preventDefault();var a=this.dataItem(e(t.currentTarget).closest("tr"));r.deleteEvent(a)},text:" ",name:"delete",iconClass:"fa fa-trash-o"};eventArr.push(s)}if(null!=r.joinCourseEvent){var c={click:function(t){t.preventDefault();var a=this.dataItem(e(t.currentTarget).closest("tr"));r.joinCourseEvent(a)},iconClass:"fa fa-arrow-right mr-1",text:M.util.get_string("startlearning","local_newsvnr"),name:"learning"};eventArr.push(c)}return eventArr.length>0&&r.columns.push({title:M.util.get_string("action","local_newsvnr"),command:eventArr,width:150}),void 0===r.toolbar&&(r.toolbar=["search"]),{dataSource:n(r),persistSelection:!0,groupable:!1,resizable:!0,toolbar:r.toolbar,excel:r.excel,search:{fields:["name"]},pageable:{refresh:!0,pageSizes:!0,pageSizes:[10,20,50,100],buttonCount:5},columns:r.columns,noRecords:{template:'<span class="grid-empty">'+M.util.get_string("emptydata","local_newsvnr")+"</span>"}}}}});