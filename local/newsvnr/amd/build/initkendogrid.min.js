define(["jquery","core/config","core/str","kendo.all.min"],function(e,t,a,r){var n=function(e){return new r.data.DataSource({transport:{read:e.apiSettings,parameterMap:function(e,t){if("read"==t)return e.filter&&(e.q=e.filter.filters[0].value),e}},pageSize:10,serverPaging:!0,serverFiltering:!0,serverSorting:!0,schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"}}},total:function(e){if(null!=e&&e.length>0)return e[0].total}}})};return{initGrid:function(a){if(eventArr=[],void 0===a.columns&&(a.columns=[]),a.selectData=function(t){for(var r=e("div[kendo-grid][k-options="+a.gridName+"]").getKendoGrid(),n=r.select(),l=[],i=0;i<n.length;i++)l.push(r.dataItem(n[i]));return l},a.selectId=function(t){for(var r=e("div[kendo-grid][k-options="+a.gridName+"]").getKendoGrid(),n=r.select(),l=[],i=0;i<n.length;i++)l.push(r.dataItem(n[i]).Id);return l},a.columns.unshift({selectable:!0,width:45}),null!=a.approvalModuleEvent){var r={click:function(r){r.preventDefault();var n=this.dataItem(e(r.currentTarget).closest("tr")),l=t.wwwroot+"/local/newsvnr/ajax/library_online/library_approval_module_ajax.php?action=approval",i={type:"POST",processData:!0,data:{moduleid:n.id}};e.ajax(l,i).then(function(){}),a.approvalModuleEvent(n)},text:" ",name:"approval",iconClass:"fa fa-check"};eventArr.push(r)}if(null!=a.deleteModuleEvent){var l={click:function(r){r.preventDefault();var n=this.dataItem(e(r.currentTarget).closest("tr")),l=t.wwwroot+"/local/newsvnr/ajax/library_online/library_approval_module_ajax.php?action=delete",i={type:"POST",processData:!0,data:{moduleid:n.id}};e.ajax(l,i).then(function(){}),a.deleteModuleEvent(n)},text:" ",name:"delete",iconClass:"fa fa-trash"};eventArr.push(l)}if(null!=a.editEvent){var i={click:function(t){t.preventDefault();var r=this.dataItem(e(t.currentTarget).closest("tr"));a.editEvent(r)},text:" ",name:"edit",iconClass:"fa fa-pencil-square-o"};eventArr.push(i)}if(null!=a.deleteEvent){var o={click:function(t){t.preventDefault();var r=this.dataItem(e(t.currentTarget).closest("tr"));a.deleteEvent(r)},text:" ",name:"delete",iconClass:"fa fa-trash-o"};eventArr.push(o)}return eventArr.length>0&&a.columns.push({title:M.util.get_string("action","local_newsvnr"),command:eventArr,width:100}),{dataSource:n(a),persistSelection:!0,groupable:!1,resizable:!0,selectable:"multiple",toolbar:["search"],search:{fields:["name"]},pageable:{refresh:!0,pageSizes:!0,pageSizes:[10,20,50,100],buttonCount:5},columns:a.columns,noRecords:{template:'<span class="grid-empty">'+M.util.get_string("emptydata","local_newsvnr")+"</span>"}}}}});