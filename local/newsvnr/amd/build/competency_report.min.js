define(["jquery","core/config","validatefm","local_newsvnr/initkendogrid","alertjs","core/str","kendo.all.min","local_newsvnr/initkendocontrolservices"],function(t,e,o,n,i,r,c,a){"use strict";let l="#competency_report",p={},u=e.wwwroot+"/local/newsvnr/report/ajax/competency_report.php";var s=function(e){var o={url:u,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",data:e};p.toolbar=["excel"],p.excel={fileName:"competency_report.xlsx",allPages:!0},p.columns=[{template:function(t){return t.name},field:"name",title:"Tên học viên",width:"100px"},{field:"competencyname",title:"Năng lực",width:"100px"},{template:function(t){return t.activity},field:"activity",title:"Hoạt động",width:"100px"},{template:function(t){return t.coursename},field:"coursename",title:"Khóa học",width:"130px"},{field:"planname",title:"Kế hoạch học tập",width:"100px"},{template:function(t){return t.status},field:"status",title:"Trạng thái",width:"90px"},{field:"timecompleted",title:"Ngày hoàn thành",width:"80px"},{field:"reviewer",title:"Người đánh giá",width:"100px"}],p.apiSettings=o;var i=n.initGrid(p);t(l).data("kendoGrid")&&t(l).data("kendoGrid").destroy(),t(l).kendoGrid(i)};return{init:function(){s(),t("#searchorgs").click(function(){!function(t,e){s({action:"searchorgstructure",orgstructureid:t,positionid:e})}(t("#orgstructure").val(),t("#orgstructure_position").val())}),t("#searchaccount").click(function(){!function(t,e,o,n){s({action:"searchaccount",username:t,competency:e,competencyplan:o,course:n})}(t("#username").val(),t("#competency").val(),t("#competencyplan").val(),t("#course").val())}),t("#resettable").click(function(){s()}),t("#exporttable").click(function(){t(".k-grid-excel").click()}),t("#changereport").click(function(){var o=t("#report").val();o?location.replace(e.wwwroot+"/local/newsvnr/report/"+o+".php"):i.alert("Thông báo","Vui lòng chọn báo cáo!")})},kendoDropdown:function(){var e="/local/newsvnr/report/ajax/report_data.php?action=";(c={}).apiSettings={url:e+"get_competency"},c.value="value",c.optionLabel="Chọn năng lực";var o=a.initDropDownList(c);t("#competency").kendoDropDownList(o),(c={}).apiSettings={url:e+"get_competencyplan"},c.value="value",c.optionLabel="Chọn kế hoạch";o=a.initDropDownList(c);t("#competencyplan").kendoDropDownList(o),(c={}).apiSettings={url:e+"get_course"},c.value="value",c.optionLabel="Chọn khóa học";o=a.initDropDownList(c);t("#course").kendoDropDownList(o),(c={}).apiSettings={url:e+"get_orgstructure_category"},c.value="categoryid",c.optionLabel="Chọn loại phòng ban";var n=a.initDropDownList(c);t("#orgstructure_category").kendoDropDownList(n),(c={}).apiSettings={url:e+"get_orgstructure"},c.value="orgid",c.optionLabel="Chọn phòng ban",c.cascadeFrom="orgstructure_category";var i=a.initDropDownList(c);t("#orgstructure").kendoDropDownList(i),(c={}).apiSettings={url:e+"get_orgstructure_jobtitle"},c.value="jobtitleid",c.optionLabel="Chọn chức danh";var r=a.initDropDownList(c);t("#orgstructure_jobtitle").kendoDropDownList(r),(c={}).apiSettings={url:e+"get_orgstructure_position"},c.value="positionid",c.optionLabel="Chọn chức vụ",c.cascadeFrom="orgstructure_jobtitle";var c,l=a.initDropDownList(c);t("#orgstructure_position").kendoDropDownList(l),(c={}).apiSettings={url:e+"get_report"},c.value="value",c.optionLabel="Chọn báo cáo";var p=a.initDropDownList(c);t("#report").kendoDropDownList(p)}}});