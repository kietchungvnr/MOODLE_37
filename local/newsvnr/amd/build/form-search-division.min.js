define(["jquery","core/ajax","core/templates"],function(e,n,r){return{processResults:function(n,r){var a=[];return e.each(r,function(e,n){a.push({value:n.id,label:n._label})}),a},transport:function(a,c,o,t){var i={},l=e("select[id=id_category]").val();"undefined"!=typeof courseid&&""!==e("#id_searchwithin").val()?i.courseid=courseid:i.categoryid=null!=l?l:0,n.call([{methodname:"local_newsvnr_loadingdivision",args:i}])[0].then(function(n){var a=[];return e.each(n,function(e,n){a.push(r.render("local_newsvnr/form-coursesetup-selector",n))}),e.when.apply(e.when,a).then(function(){var r=arguments,a=0;e.each(n,function(e,n){n._label=r[a++]}),o(n)})}).fail(t)}}});