define(["jquery","core/ajax","core/templates"],function(e,n,r){return{processResults:function(n,r){var a=[];return e.each(r,function(e,n){a.push({value:n.id,label:n._label})}),a},transport:function(a,c,t,o){var u={},i=e("select[id=id_category]").val();"undefined"!=typeof courseid&&""!==e("#id_searchwithin").val()?u.courseid=courseid:u.categoryid=i,n.call([{methodname:"local_newsvnr_loadingcoursesetup",args:u}])[0].then(function(n){var a=[];return e.each(n,function(e,n){a.push(r.render("local_newsvnr/form-coursesetup-selector",n))}),e.when.apply(e.when,a).then(function(){var r=arguments,a=0;e.each(n,function(e,n){n._label=r[a++]}),t(n)})}).fail(o)}}});