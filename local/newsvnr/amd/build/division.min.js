define(["jquery","core/config","validatefm","local_newsvnr/initkendogrid","alertjs","core/str","kendo.all.min","local_newsvnr/initkendocontrolservices"],function(i,e,t,n,a,d,o,s){"use strict";let r={},c=e.wwwroot+"/local/newsvnr/division/ajax/division_data.php",l=e.wwwroot+"/local/newsvnr/division/ajax/division_action.php";return{init:function(){!function(e){var t={url:c,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",data:e};r.onChange=function(){i.map(this.select(),function(e){return i(e).text()}).length>0?i(".user-report-fuction").removeClass("disabled"):i(".user-report-fuction").addClass("disabled")},r.columns=[{field:"name",title:"Tên chi nhánh",width:"130px"},{field:"shortname",title:"Tên viết tắt",width:"100px"},{field:"code",title:"Mã",width:"130px"},{field:"address",title:"Địa chỉ",width:"120px"},{template:function(i){return i.visible},field:"visible",title:"Kích hoạt",width:"120px"},{field:"phone",title:"Điện thoại",width:"100px"},{field:"timecreated",title:"Ngày tạo",width:"100px"},{field:"usercreate",title:"Người tạo",width:"100px"}],r.apiSettings=t,r.deleteDivisionEvent=function(e){i("#division").data("kendoGrid").dataSource.read()},r.editDivisionEvent=function(e){i("#popup-add-division").modal("show"),i(".modal-title").text("Chỉnh sửa chi nhánh"),i("#name").val(e.name),i("#shortname").val(e.shortname),i("#code").val(e.code),i("#fax").val(e.fax),i("#phone").val(e.phone),i("#website").val(e.website),i("#address").val(e.address),i("#createdivision").attr("action","update"),i("#createdivision").attr("divisionid",e.id),1==e.isvisible?i("#visible").prop("checked",!0):i("#visible").prop("checked",!1)};var a=n.initGrid(r);i("#division").data("kendoGrid")&&i("#division").data("kendoGrid").destroy(),i("#division").kendoGrid(a)}(),i("#adddivision").click(function(){i(".modal-title").text("Tạo mới chi nhánh"),i("#createdivision").attr("action","add"),i("#createdivision").attr("divisionid",""),i("#name").val(""),i("#shortname").val(""),i("#code").val(""),i("#fax").val(""),i("#phone").val(""),i("#website").val(""),i("#address").val("")}),i("#createdivision").click(function(){i(".warning-division").text("");var e=i("#name").val(),t=i("#shortname").val(),n=i("#code").val(),d=i("#fax").val(),o=i("#phone").val(),s=i("#website").val(),r=i("#address").val(),c=i("#visible").prop("checked"),v=i(this).attr("action"),h=i(this).attr("divisionid");if(""==e||""==t||""==n)return""==e&&i('.warning-division[data="name"]').text("Tên không được để trống"),""==t&&i('.warning-division[data="shortname"]').text("Tên viết tắt không được để trống"),void(""==n&&i('.warning-division[data="code"]').text("Mã không được để trống"));var p={type:"GET",processData:!0,data:{action:v,name:e,shortname:t,code:n,fax:d,phone:o,website:s,address:r,visible:c,divisionid:h}};i.ajax(l,p).then(function(e){var t=i.parseJSON(e);a.notify(t.result,"success",3),i("#division").data("kendoGrid").dataSource.read(),i("#popup-add-division").modal("hide")})}),i("#deletedivision").click(function(){var e=getSelectRow("#division"),t={type:"POST",processData:!0,data:{dataselect:JSON.stringify(e),action:"deleteselected"}};a.confirm("Cảnh báo","Bạn có chắc muốn xóa các chi nhánh đã chọn ?",function(){i.ajax(l,t).then(function(e){var t=i.parseJSON(e);a.notify(t.result,"success",3),i("#division").data("kendoGrid").dataSource.read(),i(".user-report-fuction").addClass("disabled")})},function(){})})}}});