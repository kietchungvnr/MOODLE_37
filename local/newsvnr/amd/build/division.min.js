define(["jquery","core/config","validatefm","local_newsvnr/initkendogrid","alertjs","core/str","kendo.all.min","local_newsvnr/initkendocontrolservices"],function(i,t,e,n,a,d,o,s){"use strict";let r={},c=t.wwwroot+"/local/newsvnr/division/ajax/division_data.php",l=t.wwwroot+"/local/newsvnr/division/ajax/division_action.php";return{init:function(){!function(t){var e={url:c,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",data:t};r.onChange=function(){i.map(this.select(),function(t){return i(t).text()}).length>0?i(".user-report-fuction").removeClass("disabled"):i(".user-report-fuction").addClass("disabled")},r.columns=[{field:"name",title:"Tên chi nhánh",width:"130px"},{field:"shortname",title:"Tên viết tắt",width:"100px"},{field:"code",title:"Mã",width:"130px"},{field:"address",title:"Địa chỉ",width:"120px"},{template:function(i){return i.isactive},field:"isactive",title:"Kích hoạt",width:"120px"},{field:"phone",title:"Điện thoại",width:"100px"},{field:"datecreated",title:"Ngày tạo",width:"100px"},{field:"usercreated",title:"Người tạo",width:"100px"}],r.apiSettings=e,r.deleteDivisionEvent=function(t){i("#division").data("kendoGrid").dataSource.read()},r.editDivisionEvent=function(t){i("#popup-add-division").modal("show"),i(".modal-title").text("Chỉnh sửa chi nhánh"),i("#name").val(t.name),i("#shortname").val(t.shortname),i("#code").val(t.code),i("#fax").val(t.fax),i("#phone").val(t.phone),i("#website").val(t.website),i("#address").val(t.address),i("#createdivision").attr("action","update"),i("#createdivision").attr("divisionid",t.id)};var a=n.initGrid(r);i("#division").data("kendoGrid")&&i("#division").data("kendoGrid").destroy(),i("#division").kendoGrid(a)}(),i("#adddivision").click(function(){i(".modal-title").text("Tạo mới chi nhánh"),i("#createdivision").attr("action","add"),i("#createdivision").attr("divisionid",""),i("#name").val(""),i("#shortname").val(""),i("#code").val(""),i("#fax").val(""),i("#phone").val(""),i("#website").val(""),i("#address").val("")}),i("#createdivision").click(function(){i(".warning-division").text("");var t=i("#name").val(),e=i("#shortname").val(),n=i("#code").val(),d=i("#fax").val(),o=i("#phone").val(),s=i("#website").val(),r=i("#address").val(),c=i("#isactive").prop("checked"),v=i(this).attr("action"),h=i(this).attr("divisionid");if(""==t||""==e||""==n)return""==t&&i('.warning-division[data="name"]').text("Tên không được để trống"),""==e&&i('.warning-division[data="shortname"]').text("Tên viết tắt không được để trống"),void(""==n&&i('.warning-division[data="code"]').text("Mã không được để trống"));var p={type:"GET",processData:!0,data:{action:v,name:t,shortname:e,code:n,fax:d,phone:o,website:s,address:r,isactive:c,divisionid:h}};i.ajax(l,p).then(function(t){var e=i.parseJSON(t);a.notify(e.result,"success",3),i("#division").data("kendoGrid").dataSource.read(),i("#popup-add-division").modal("hide")})}),i("#deletedivision").click(function(){var t=getSelectRow("#division"),e={type:"POST",processData:!0,data:{dataselect:JSON.stringify(t),action:"deleteselected"}};a.confirm("Cảnh báo","Bạn có chắc muốn xóa các chi nhánh đã chọn ?",function(){i.ajax(l,e).then(function(t){var e=i.parseJSON(t);a.notify(e.result,"success",3),i("#division").data("kendoGrid").dataSource.read(),i(".user-report-fuction").addClass("disabled")})},function(){})})}}});