define(["jquery","core/ajax","core/templates"],function(e,t,n){return{processResults:function(t,n){var r=[];return e.each(n,function(e,t){r.push({value:t.id,label:t._label})}),r},transport:function(r,o,a,i){var c,u={},l="",s=e("#treeview-orgstructure-course").data("kendoTreeView"),d=s.select(),f=e("#id_courseofjobtitle").parent().find('[id^="form_autocomplete_selection"] .badge');e.each(f,function(t,n){var r=t==f.length-1,o=e(this).attr("data-value");r?l+=o:l=l+o+","}),"undefined"!=typeof courseid&&""!==e("#id_searchwithin").val()?u.courseid=courseid:(d.length>0&&(c=s.dataItem(d)),c&&(u.orgstructureid=c.id),u.orgjobtitleid=l),t.call([{methodname:"local_newsvnr_loadingorgposition",args:u}])[0].then(function(t){var r=[];return e.each(t,function(e,t){r.push(n.render("local_newsvnr/form-orgposition-selector",t))}),e.when.apply(e.when,r).then(function(){var n=arguments,r=0;e.each(t,function(e,t){t._label=n[r++]}),a(t)})}).fail(i)}}});