define(["jquery","core/config","validatefm","local_newsvnr/initkendogrid","alertjs","core/str","kendo.all.min","local_newsvnr/initkendocontrolservices"],function(t,e,r,i,a,o,n,s){"use strict";let c="#competency_report",l={},u=e.wwwroot+"/local/newsvnr/report/ajax/learning_report.php";var p=function(e){var r={url:u,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",data:e};l.toolbar=["excel"],l.excel={fileName:"learning_report.xlsx",allPages:!0},l.columns=[{template:function(t){return t.name},field:"name",title:"Tên học viên",width:"100px"},{template:function(t){return t.coursename},field:"coursename",title:"Tên khóa học",width:"120px"},{template:"<div class='d-flex participants-collum'><div class='progress course'><div class='progress-bar' role='progressbar' aria-valuenow='#: process #' aria-valuemin='0' aria-valuemax='100' style='width:#: process #'></div></div><div></div></div></div>",field:"process",title:"Tiến trình học",width:"100px"},{template:function(t){return t.status},field:"status",title:"Trạng thái",width:"100px"},{field:"timestart",title:"Ngày tham gia",width:"100px"},{field:"timecompleted",title:"Ngày hoàn thành",width:"70px"},{field:"timeaccess",title:"Thời gian học",width:"80px"},{field:"grade",title:"Điểm số",width:"100px"}],l.apiSettings=r;var a=i.initGrid(l);t(c).data("kendoGrid")&&t(c).data("kendoGrid").destroy(),t(c).kendoGrid(a)};return{init:function(){p(),t("#searchorgs").click(function(){!function(t,e){p({action:"searchorgstructure",orgstructureid:t,positionid:e})}(t("#orgstructure").val(),t("#orgstructure_position").val())}),t("#searchaccount").click(function(){!function(t,e,r,i,a,o,n){p({action:"searchaccount",username:t,datestart:e,dateend:r,courseid:i,status:a,startprocess:o,endprocess:n})}(t("#username").val(),t("#start_timeaccess").val(),t("#end_timeaccess").val(),t("#course").val(),t("#status").val(),t("#start_process").val(),t("#end_process").val())}),t("#resettable").click(function(){p()}),t("#exporttable").click(function(){t(".k-grid-excel").click()})},kendoDropdown:function(){var e="/local/newsvnr/report/ajax/report_data.php?action=";t("#start_timeaccess").kendoDatePicker({change:function(){t("#end_timeaccess").val("");var e=t("#start_timeaccess").val().split("/");if(e.length>1){var r=t("#end_timeaccess").data("kendoDatePicker"),i=parseInt(e[2]),a=parseInt(e[0]),o=parseInt(e[1]);r.setOptions({min:new Date(i,a-1,o+1)})}}}),t("#end_timeaccess").kendoDatePicker(),(n={}).apiSettings={url:e+"get_course"},n.value="value",n.optionLabel="Chọn khóa học";var r=s.initDropDownList(n);t("#course").kendoDropDownList(r),(n={}).apiSettings={url:e+"get_orgstructure_category"},n.value="categoryid",n.optionLabel="Chọn loại phòng ban";var i=s.initDropDownList(n);t("#orgstructure_category").kendoDropDownList(i),(n={}).apiSettings={url:e+"get_orgstructure"},n.value="orgid",n.optionLabel="Chọn phòng ban",n.cascadeFrom="orgstructure_category";var a=s.initDropDownList(n);t("#orgstructure").kendoDropDownList(a),(n={}).apiSettings={url:e+"get_orgstructure_jobtitle"},n.value="jobtitleid",n.optionLabel="Chọn chức danh";var o=s.initDropDownList(n);t("#orgstructure_jobtitle").kendoDropDownList(o),(n={}).apiSettings={url:e+"get_orgstructure_position"},n.value="positionid",n.optionLabel="Chọn chức vụ",n.cascadeFrom="orgstructure_jobtitle";var n,c=s.initDropDownList(n);t("#orgstructure_position").kendoDropDownList(c),(n={}).apiSettings={url:e+"get_learning_status"},n.value="value",n.optionLabel="Chọn";var l=s.initDropDownList(n);t("#status").kendoDropDownList(l),t("#start_process").kendoNumericTextBox({format:"p0",factor:100,min:0,max:1,step:.01}),t("#end_process").kendoNumericTextBox({format:"p0",factor:100,min:0,max:1,step:.01})}}});