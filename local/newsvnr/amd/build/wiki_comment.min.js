define(["jquery","core/config","validatefm","local_newsvnr/initkendogrid","alertjs","core/str","kendo.all.min","local_newsvnr/initkendocontrolservices"],function(t,e,n,i,a,o,c,r){"use strict";let s=e.wwwroot+"/local/newsvnr/ajax/wiki_comment.php";t(".wiki-add textarea");return{init:function(){t(".post_comment").click(function(){t(this).addClass("disabled");var e=t(this).parent().prev().attr("userid"),n=t(this).parent().prev().attr("wikipage"),i=t(this).parent().prev().attr("contextid"),o={type:"GET",processData:!0,data:{action:t(this).attr("action"),userid:e,wikipage:n,content:t(this).parent().prev().val(),contextid:i,commentid:t(this).parent().prev().attr("commentid")}};t.ajax(s,o).then(function(e){a.success(e),t(this).removeClass("disabled"),location.reload()})}),t(".delete_comment").click(function(){var e={type:"GET",processData:!0,data:{commentid:t(this).attr("commentid"),action:"delete"}};a.confirm("Thông báo","Xóa bình luận này?",function(){t.ajax(s,e).then(function(t){a.success(t),location.reload()})},function(){a.error("Cancel")})}),t(".show_edit_comment").click(function(){var e=t(this).attr("commentid"),n=t('.content[commentid="'+e+'"]').text();t(".edit_comment#"+e).toggleClass("d-none"),t('textarea[commentid="'+e+'"]').val(n)}),t(".cancel-comment").click(function(){var e=t(this).attr("commentid");t(".edit_comment#"+e).addClass("d-none")}),t(".post_file").click(function(){t(".fp-btn-add").click()}),t("body").on("change",'input[name="repo_upload_file"]',function(){var e=t('.fp-formset input[type="file"]').val();e=e.replace("C:\\fakepath\\",""),t(".filename").html(e)})}}});