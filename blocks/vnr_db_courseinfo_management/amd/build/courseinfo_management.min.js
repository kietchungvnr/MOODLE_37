define(["jquery","core/config","core/str","local_newsvnr/initkendogrid","alertjs"],(e,t,n,o,a)=>{let i="#courseinfo_management",r={},d=t.wwwroot+"/blocks/vnr_db_courseinfo_management/ajax/courseinfo_management.php";var c=[{key:"codecourse",component:"local_newsvnr"},{key:"coursename",component:"local_newsvnr"},{key:"timeopencourse",component:"block_vnr_db_courseinfo_management"},{key:"timeendcourse",component:"block_vnr_db_courseinfo_management"},{key:"totalstudent",component:"block_vnr_db_courseinfo_management"},{key:"studentunfinished",component:"block_vnr_db_courseinfo_management"},{key:"courseaveragepoints",component:"block_vnr_db_courseinfo_management"},{key:"highestpoint",component:"block_vnr_db_courseinfo_management"},{key:"lowestpoint",component:"block_vnr_db_courseinfo_management"}];e("#coursedatestart").kendoDatePicker({change:function(){if(e("#coursedateend").val(""),date=e("#coursedatestart").val().split("/"),date.length>1){var t=e("#coursedateend").data("kendoDatePicker"),n=parseInt(date[2]),o=parseInt(date[0]),a=parseInt(date[1]);t.setOptions({min:new Date(n,o-1,a+1)})}}}),e("#coursedateend").kendoDatePicker();var s=function(t,a){e(i).data("kendoGrid")&&e(i).data("kendoGrid").destroy(),n.get_strings(c).then(function(n){var c={url:d,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",data:{datestart:t,dateend:a}},s=[{field:"courseid",title:n[0],width:"125px"},{template:"<a href='#:href #' target='_blank'>#:coursename #</a>",field:"coursename",title:n[1],width:"200px"},{field:"startdate",title:n[2],width:"120px"},{field:"enddate",title:n[3],width:"120px"},{field:"totalstudent",title:n[4],width:"100px"},{field:"studentunfinish",title:n[5],width:"100px"},{field:"courseaveragepoint",title:n[6],width:"100px"},{field:"highestpoint",title:n[7],width:"120px"},{field:"lowestpoint",title:n[8],width:"100px"}];r.selectable=!1,r.toolbar=["excel","search"],r.excel={fileName:"courseinfo.xlsx",allPages:!0},r.columns=s,r.apiSettings=c;var l=o.initGrid(r);e(i).kendoGrid(l)})};return{init:function(){s(),e("#course_search_dashboard").click(function(){var t=e("#coursedatestart").val(),n=parseInt((new Date(t).getTime()/1e3).toFixed(0)),o=e("#coursedateend").val(),a=parseInt((new Date(o).getTime()/1e3).toFixed(0));s(n,a)})}}});