define(["jquery","core/config","core/str","local_newsvnr/initkendogrid","alertjs"],(e,n,t,o,i)=>{var a=n.wwwroot+"/blocks/vnr_db_courseinfo_management/ajax/studentinfo_management.php",s=n.wwwroot+"/blocks/vnr_db_courseinfo_management/ajax/listcourse.php",r=[{key:"number",component:"block_vnr_db_courseinfo_management"},{key:"studentcode",component:"block_vnr_db_courseinfo_management"},{key:"student",component:"block_vnr_db_courseinfo_management"},{key:"codecourse",component:"local_newsvnr"},{key:"coursename",component:"local_newsvnr"},{key:"finishdate",component:"block_vnr_db_courseinfo_management"},{key:"processfinish",component:"block_vnr_db_courseinfo_management"},{key:"grade",component:"block_vnr_db_courseinfo_management"},{key:"rank",component:"block_vnr_db_courseinfo_management"},{key:"enrolledcourse",component:"block_vnr_db_courseinfo_management"},{key:"courselist",component:"block_vnr_db_courseinfo_management"},{key:"lastaccess",component:"block_vnr_db_courseinfo_management"}],d=function(n){var i={};t.get_strings(r).then(function(t){var a={url:s,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",data:{userid:n,role:5}},r=[{field:"usercode",title:t[1],width:"80px"},{field:"studentname",title:t[2],width:"120px"},{field:"courseid",title:t[3],width:"80px"},{field:"coursename",title:t[4],width:"150px"},{field:"timecompleted",title:t[5],width:"100px"},{field:"process",template:"<div class='d-flex participants-collum'><div class='progress course'><div class='progress-bar' role='progressbar' aria-valuenow='#: process #' aria-valuemin='0' aria-valuemax='100' style='width:#: process #'></div></div><div>#: process #</div></div></div>",title:t[6],width:"150px"},{field:"gradefinal",title:t[7],width:"50px"},{field:"rank",title:t[8],width:"50px"}];e("#listcourse_student").data("kendoGrid")&&e("#listcourse_student").data("kendoGrid").destroy();i.selectable=!1,i.toolbar=["excel","search"],i.excel={fileName:"studentinfo.xlsx",allPages:!0},i.columns=r,i.apiSettings=a;var d=o.initGrid(i);e("#listcourse_student").kendoGrid(d)})};return{init:function(){e('.nav-link[data-key="studentinfo"]').click(function(){e("#studentinfo_management").data("kendoGrid")&&e("#studentinfo_management").data("kendoGrid").destroy();var n={};t.get_strings(r).then(function(t){var i={url:a,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",data:{role:5}},s=[{field:"number",title:t[0],width:"50px"},{field:"usercode",title:t[1],width:"120px"},{template:function(e){return e.useravatar+"<a href='"+e.href+"' target='_blank'>"+e.name+"</a>"},field:"name",title:t[2],width:"150px"},{field:"lastaccess",title:t[11],width:"150px"},{field:"enrolledcourse",title:t[9],width:"130px"}];n.selectable=!1,n.toolbar=["excel","search"],n.excel={fileName:"studentinfo.xlsx",allPages:!0},n.columns=s,n.apiSettings=i,n.viewCourseInfoPopupEvent=function(n){e("#windowstudent").kendoWindow({width:"1200px",title:t[10],visible:!1,open:function(e){d(n.userid),setPositionWindow("#windowstudent",100)},actions:["Minimize","Maximize","Close"]}),e("#windowstudent").data("kendoWindow").center().open()};var r=o.initGrid(n);e("#studentinfo_management").kendoGrid(r)})})}}});