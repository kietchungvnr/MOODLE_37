define(["jquery","core/config","alertjs","core/str","core/modal_factory","core/modal_events","core/notification","core/fragment","core/ajax","core/yui","kendo.all.min"],function(t,e,a,o,r,n,c,i,d,l,s){"use strict";var f=t("#matrix_grid"),m=e.wwwroot+"/blocks/vnr_db_matrix_competency/ajax/matrix.php";return{init:function(){var e={url:m,type:"GET",dataType:"json",contentType:"application/json",data:{action:"get_matrix"}};t.ajax(m,e).then(function(a){a.data_columns.forEach(function(t){var e;t.template&&(t.template=(e=t.template,Function('"use strict";return ('+e+")")()))});var o=new s.data.DataSource({transport:{read:e},schema:{model:{id:"id",fields:{id:{type:"competency"},name:{type:"string"}}},data:"data_grid"}});f.kendoGrid({autoBind:!1,dataSource:o,columns:a.data_columns,noRecords:{template:'<span class="grid-empty">Chưa cấu hình năng lực ma trận!</span>'}});var r="[data-field='"+a.current_orgposition+"']",n=f.getKendoGrid().thead;n.find("[role='columnheader']").css({"background-color":"#2d5b7c",color:"#fff","font-size":"15px","font-weight":"bold"}),n.find(r).css({"background-color":"#3c8dbc",color:"#fff"}),t('[data-toggle="tooltip"]').tooltip(),o.read().then(e=>{!function(e){var a="",o=0;e.each(function(r){var n=t(this).text();if(0===r&&(a=n),n!==a||r===e.length-1){var c=r-o;if(r===e.length-1&&(o+=1),e.eq(c).attr("rowspan",o),r===e.length-1)for(var i=r;i>c;i--)e.eq(i).remove();else for(var d=r-1;d>c;d--)e.eq(d).remove();a=n,o=0}o++})}(t('[data-block="vnr_db_matrix_competency"] [role="grid"] td:first-child'))})})}}});