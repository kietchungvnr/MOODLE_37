define(["jquery","core/ajax","mod_quiz/random_question_form_preview"],function(n,t,e){var o='[data-region="random-question-preview-container"]',a='[name="category"]',r='[name="includesubcategories"]',i='[name="fromtags[]"]',u="[name=easylevel_number]",c="[name=normallevel_number]",l="[name=hardlevel_number]",m="[name=numbertoadd_percent]",f="[name=numbertoadd]",s=function(n){return n.find(a).val()},d=function(n){return s(n).split(",")[0]},v=function(n,t){return!!function(n,t){var e=s(n);return t.indexOf(e)>-1}(n,t)||n.find(r).is(":checked")},_=function(n){return n.find(i).val().map(function(n){return n.split(",")[0]})},g=function(t,e){for(var o="",a=1;a<=e;a++)o+='<option value="'+a+'">'+a+"</option>";e>0?n(t).html(o):n(t).html('<option value="0">0</option>')},h=function(n,a,r){(function(n,e,o,a,r,i){var u={methodname:"core_question_get_random_question_summaries",args:{categoryid:n,includesubcategories:e,tagids:o,contextid:a,limit:r,offset:i}};return t.call([u])[0]})(d(n),v(n,r),_(n),a,5,0).then(function(n){n.totalcount;g(f,n.totalcount),g(u,n.totalcount_easy),g(c,n.totalcount_normal),g(l,n.totalcount_hard),g(m,n.totalcount_level)});var i=n.find(o);e.reload(i,d(n),v(n,r),_(n),a)},p=function(t,o,u){var c=null;t.on("change",function(l){var m;((m=n(l.target)).closest(a).length>0||m.closest(r).length>0||m.closest(i).length>0)&&(e.showLoadingIcon(t),c&&clearTimeout(c),c=setTimeout(function(){h(t,o,u)},2e3))})};return{init:function(t,e,o,a){if(1==a){var r=n("#"+t);h(r,e,o),p(r,e,o)}}}});
//# sourceMappingURL=add_random_form.min.js.map
