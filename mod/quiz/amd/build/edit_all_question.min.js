define(["jquery","core/notification","core/templates","core/config","core/str"],function(e,t,a,i,n){return{editquestion:function(){e(document).ready(function(){e('input[name="all"]').bind("click",function(){e(this).is(":checked")?(e('input[name="slot[]"]').not(this).prop("checked",this.checked),e('input[name="selectquestion[]"]').prop("checked",!1),e('input[name="selectquestion[]"]').not(this).trigger("click")):(e('input[name="slot[]"]').not(this).prop("checked",this.checked),e('input[name="selectquestion[]"]').prop("checked",!0),e('input[name="selectquestion[]"]').not(this).trigger("click")),e('input[name="selectquestion[]"]').each(function(){e(this).is(":checked")?e('button[data-target="#modalchangeallmark"]').removeAttr("disabled"):e('button[data-target="#modalchangeallmark"]').attr("disabled","disabled")})}),e('input[name="slot[]"]').click(function(){e(this).next("input").trigger("click"),e('input[name="selectquestion[]"]').each(function(){if(e(this).is(":checked"))return e('button[data-target="#modalchangeallmark"]').removeAttr("disabled"),!1;e('button[data-target="#modalchangeallmark"]').attr("disabled","disabled")})})}),e(document).on("click",".tag-item",function(){var t=e(this).attr("value");e(this).hasClass("active")?e('.tag-condition-container span[role="listitem"][data-value="'+t+'"]').trigger("click"):(e(".form-autocomplete-downarrow").trigger("click"),setTimeout(function(){e('.questionbankformforpopup li[role="option"]').attr("aria-selected","false"),e('.questionbankformforpopup li[data-value="'+t+'"]').attr("aria-selected","true"),e('.questionbankformforpopup li[data-value="'+t+'"]').trigger("click")},500))}),e("#changemark").click(function(){var a=new Array;if(e('input[name="slot[]"]:checked').each(function(){a.push(this.value)}),a.length>0){var c=window.location.href,o=new URL(c).searchParams.get("cmid"),r=e("#maxmark").val(),s=i.wwwroot+"/mod/quiz/edit_rest.php",l={type:"POST",data:{class:"resource",field:"updateallmaxmark",maxmark:r,listid:a.join(","),cmid:o,quizid:0,sesskey:M.cfg.sesskey},processData:!0};e.ajax(s,l).then(function(i){i.error?t.addNotification({message:i.error,type:"error"}):(a.forEach(t=>e("#slot-"+t+" .instancemaxmark.decimalplaces_2").text(i.instancemaxmark)),e(".mod_quiz_summarks").text(i.newsummarks),n.get_string("changeallmarksuccess","mod_quiz").then(function(e){alert(e)}).fail(t.exception))}).fail(t.exception)}})}}});