define(["jquery","core/config","kendo.all.min","core/str","core/notification"],function(e,a,t,n,i){var o=a.wwwroot+"/local/newsvnr/exam/ajax/examonline.php",l=a.wwwroot+"/examonline.php";window.location.href==l&&(e.getJSON(o,function(a){e("#table-exam").hide().html(a.result).fadeIn("fast")}),e.getJSON(o+"?action=exam_category",function(a){e("#examonline-category").hide().html(a.category_exam).fadeIn("fast")})),e("#examdate").kendoDatePicker(),e("#exam_search_button").click(function(){var a=e("#examdate").val(),t=parseInt((new Date(a).getTime()/1e3).toFixed(0)),n=e(".exam_search_input#examname").val().trim().split(" ").join("+"),i=e(".exam_search_input#subjectname").val().trim().split(" ").join("+"),l=e("#exam-type").val();e("li").removeClass("active"),e.getJSON(o+"?examname="+n+"&subjectname="+i+"&date="+t+"&action=search&examtype="+l,function(a){e("#table-exam").hide().html(a.result).fadeIn("fast"),e(".loading-page").removeClass("active")})}),e("#exam-type").kendoDropDownList({dataSource:[{text:"Danh sách kì thi bắt buộc",value:0},{text:"Danh sách kì thi tự do",value:1}],dataTextField:"text",dataValueField:"value",change:function(a){var t={type:"POST",processData:!0,data:{action:"exam_category",examtype:this.value()}};e.ajax(o,t).then(function(a){var t=e.parseJSON(a);e("#examonline-category").hide().html(t.category_exam).fadeIn("fast"),e("#table-exam").hide().html(t.result).fadeIn("fast")})}}),e("#examonline-category").on("click","li.exam",function(a){var t=e(this).attr("id"),n=e("#exam-type").val();e(".loading-page").addClass("active"),e("#menu-tree-exam li.exam").removeClass("active"),e("#menu-tree-exam li.subject-exam").removeClass("active"),e("#menu-tree-exam li.exam").addClass("not-allow"),e(this).addClass("active"),e(".content-expand."+t).slideToggle(),e(this).children("i.rotate-icon").toggleClass("active");var i={type:"POST",processData:!0,data:{examid:t,examtype:n},contenttype:"application/json"};e.ajax(o,i).then(function(a){var t=e.parseJSON(a);e("#table-exam").hide().html(t.result).fadeIn("fast"),e(".loading-page").removeClass("active"),e("#menu-tree-exam li.exam").removeClass("not-allow")})}),e("#examonline-category").on("click","li.subject-exam",function(t){e(".loading-page").addClass("active"),e("#menu-tree-exam li.exam").removeClass("active"),e("#menu-tree-exam li.subject-exam").removeClass("active"),e(this).addClass("active");var n=e(this).attr("data-examsujbectexam"),i=a.wwwroot+"/course/modedit.php?add=quiz&type=&course=1&section=0&return=0&sr=0&examsubjectexamid="+n;e("#add-quiz").attr("href",i),e("#add-quiz").removeClass("d-none");var l={type:"POST",processData:!0,data:{examsubjectexamid:n,examtype:e("#exam-type").val()},contenttype:"application/json"};e.ajax(o,l).then(function(a){var t=e.parseJSON(a);e("#table-exam").hide().html(t.result).fadeIn("fast"),e(".loading-page").removeClass("active")})})});