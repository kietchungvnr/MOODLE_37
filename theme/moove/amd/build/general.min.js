require.config({paths:{iframetracker:"/theme/moove/js/jquery.iframetracker"}}),define(["jquery","core/config","theme_moove/handle_cookie","iframetracker"],function(e,o,a,i){"use strict";if(e(document).ready(function(){e("body").removeClass("loading"),e("#standard-iframe a").bind("contextmenu",function(e){a.setCookie("spa","-1",0),a.setCookie("cookie","-1",0)}),e("#standard-iframe a").on("click",function(e){(e.ctrlKey||e.shiftKey||e.metaKey||e.button&&1==e.button)&&(a.setCookie("spa","-1",0),a.setCookie("cookie","-1",0))}),e("#general-iframe a").bind("contextmenu",function(e){a.setCookie("spa","-1",0)}),e("#general-iframe a").on("click",function(e){(e.ctrlKey||e.shiftKey||e.metaKey||e.button&&1==e.button)&&a.setCookie("spa","-1",0)})}),window.onbeforeunload=function(){a.getCookie("baseUrl")&&a.setCookie("baseUrl","-1",0),a.setCookie("spa","-1",0)},!a.getCookie("baseUrl")){var n=window.location.pathname;["/course/view.php","/user/index.php","/badges/view.php","/admin/tool/lp/coursecompetencies.php","/grade/report/index.php","/contentbank/index.php"].includes(n)&&a.setCookie("baseUrl",window.location.href)}e("ul.nav-tabs.course li").click(function(o){var i;e(this).addClass("active").siblings().removeClass("active"),a.setCookie("spa","true"),a.setCookie("baseUrl",window.location.href);var n=e(this).attr("data-page-url");if(n.includes("course/view.php")?e("#focus-mod.open-focusmod, #setting-context, #page-header .singlebutton").removeClass("d-none"):e("#focus-mod.open-focusmod, #setting-context, #page-header .singlebutton").addClass("d-none"),a.getCookie("baseUrl").includes(n))return e("#course-iframe").addClass("d-none"),e("#region-main .card-body").removeClass("d-none"),void a.setCookie("spa","-1",0);var t='<iframe id="course-iframe" class="card" src="'+n+'" frameBorder="0"></iframe>';e("#general-iframe-view-coursepage").html(t),e("#region-main .card-body").addClass("d-none"),e("#region-main .loading-page").addClass("active"),e("#course-iframe").on("load",function(){e("#course-iframe").iframeTracker({blurCallback:function(o){e("body").focus(),a.setCookie("spa","true")},outCallback:function(e,o){this._overId=null,a.setCookie("spa","-1",0)},_overId:null}),e("#course-iframe").removeClass("d-none"),null==i&&(i=iFrameResize({log:!1,heightCalculationMethod:"taggedElement"},"#course-iframe")),e("#region-main .loading-page").removeClass("active")})})});