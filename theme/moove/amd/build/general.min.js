require.config({paths:{iframetracker:"//cdn.rawgit.com/vincepare/iframeTracker-jquery/master/dist/jquery.iframetracker"}}),define(["jquery","core/config","theme_moove/handle_cookie","iframetracker"],function(e,o,a,i){"use strict";if(e(window).on("load",function(){a.getCookie("spa")&&(document.cookie="spa=; max-Age=-1;path=/")}),window.onbeforeunload=function(){a.getCookie("baseUrl")&&(document.cookie="baseUrl=; max-Age=-1;path=/")},e("body").attr("id").includes("page-course-view")&&(e("body").addClass("loading"),e(document).ready(function(){e("body").removeClass("loading")})),!a.getCookie("baseUrl")){var r=window.location.pathname;["/course/view.php","/user/index.php","/badges/view.php","/admin/tool/lp/coursecompetencies.php","/grade/report/index.php","/contentbank/index.php"].includes(r)&&a.setCookie("baseUrl",window.location.href)}e("ul.nav-tabs.course li").click(function(o){e(this).addClass("active").siblings().removeClass("active"),a.setCookie("spa","true");var i=e(this).attr("data-page-url");if(i.includes("course/view.php")?e("#focus-mod.open-focusmod, #setting-context, #page-header .singlebutton").removeClass("d-none"):e("#focus-mod.open-focusmod, #setting-context, #page-header .singlebutton").addClass("d-none"),a.getCookie("baseUrl").includes(i))return e("#course-iframe").addClass("d-none"),void e("#region-main .card-body").removeClass("d-none");var r='<iframe id="course-iframe" class="card" src="'+i+'" frameBorder="0"></iframe>';e("#general-iframe-view-coursepage").html(r),e("#region-main .card-body").addClass("d-none"),e("#region-main .loading-page").addClass("active"),e("#course-iframe").on("load",function(){setTimeout(function(){try{e("#course-iframe").iframeTracker({blurCallback:function(e){a.setCookie("spa","true"),console.log("spa")},outCallback:function(e,o){this._overId=null,document.cookie="spa=; max-Age=-1;path=/",console.log("unspa")},_overId:null}),e("#course-iframe").removeClass("d-none");iFrameResize({log:!1},"#course-iframe");e("#region-main .loading-page").removeClass("active")}catch(e){(e.message.indexOf("Blocked a frame with origin")>-1||e.message.indexOf("from accessing a cross-origin frame.")>-1)&&console.log("Same origin Iframe error found!!!")}},1e3)})})});