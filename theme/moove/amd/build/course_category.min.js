define(["jquery","core/config","core/str","core/notification","local_newsvnr/initkendocontrolservices"],function(e,t,a,o,c){"use strict";return{init:function(){var a=t.wwwroot+"/local/newsvnr/restfulapi/webservice.php?action=";e(".ajax-load").click(function(){e(".loading-page").addClass("active"),e("li").removeClass("active"),e(".courses_search_input").val(""),e(this).parents("li").addClass("active");var t={type:"GET",processData:!0,data:{id:e(this).attr("id")},contenttype:"application/json"};e.ajax("/course/load_course.php",t).then(function(t){e("#load-course").hide().html(t).fadeIn("fast"),e(".loading-page").removeClass("active")})}),e("#courses_search_button").click(function(){e(".loading-page").addClass("active");var t=e('.courses_search_input[name="keyword"]').val().trim().split(" ").join("+"),a=e('.courses_search_input[name="teacher"]').val().trim().split(" ").join("+"),o=e('.courses_search_input[name="category"]').val().trim().split(" ").join("+"),c=e("#course-filter :selected").val();e("li").removeClass("active"),e(".dropdown-menu-tree").slideUp(),e("#load-course").load("/course/load_course.php?keyword="+t+"&teacher="+a+"&category="+o+"&filter="+c,function(){e(".loading-page").removeClass("active")})});var o=e("#load-course").attr("category");void 0!==o?(e("#load-course").load("/course/load_course.php?id="+o),e("#drop-course-category .list-category[data="+o+"]").addClass("active")):e("#load-course").load("/course/load_course.php"),e(".list-category").click(function(){var t=e(this).attr("data");e(".list-category[data="+t+"] i").toggleClass("active"),e(".dropdown-menu-tree."+t).slideToggle()}),e(".list-subcategory").click(function(){var t=e(this).attr("id");e(".list-category#"+t).toggleClass("active"),e(".dropdown-menu-tree."+t).slideToggle()}),e(".checkall").click(function(){e("input.usercheckbox").prop("checked",this.checked)}),e("#course-filter").bind("change",function(){e(".loading-page").addClass("active"),e(".courses_search_input").val("");var t={type:"GET",processData:!0,data:{filter:e(this).val()},contenttype:"application/json"};e.ajax("/course/load_course.php",t).then(function(t){e("li").removeClass("active"),e(".dropdown-menu-tree").slideUp(),e("#load-course").hide().html(t).fadeIn("fast"),e(".loading-page").removeClass("active")})});var i={};e("#course-filter option").each(function(){i[this.value]&&e(this).remove(),i[this.value]=!0}),e("li.list-category").each(function(){e(this).parent(".dropdown-menu-tree").length&&e(this).css("background","transparent")}),(r={}).apiSettings={url:a+"search_category"},r.textfield="name",r.select=function(t){setTimeout(function(){e("#courses_search_button").click()},500)};var s=c.initSearchAutoComplete(r);e("#category").kendoAutoComplete(s),(r={}).apiSettings={url:a+"search_course"},r.textfield="fullname",r.select=function(t){setTimeout(function(){e("#courses_search_button").click()},500)};var r,n=c.initSearchAutoComplete(r);e("#keyword").kendoAutoComplete(n),(r={}).apiSettings={url:a+"search_teacher"},r.textfield="fullnamet",r.select=function(t){setTimeout(function(){e("#courses_search_button").click()},500)};var l=c.initSearchAutoComplete(r);e("#teacher").kendoAutoComplete(l)}}});