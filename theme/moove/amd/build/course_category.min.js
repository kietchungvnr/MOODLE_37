define(["jquery","core/config","core/str","core/notification","local_newsvnr/initkendocontrolservices"],function(e,t,o,a,c){"use strict";return{init:function(){var o=t.wwwroot+"/local/newsvnr/restfulapi/webservice.php?action=";e(".ajax-load").click(function(){e(".loading-page").addClass("active"),e("li").removeClass("active"),e(".courses_search_input").val(""),e(this).parents("li").addClass("active");var t={type:"GET",processData:!0,data:{id:e(this).attr("id")},contenttype:"application/json"};e.ajax("/course/load_course.php",t).then(function(t){e("#load-course").hide().html(t).fadeIn("fast"),e(".loading-page").removeClass("active")})}),e("#courses_search_button").click(function(){e(".loading-page").addClass("active");var t=e('.courses_search_input[name="keyword"]').val().trim().split(" ").join("+"),o=e('.courses_search_input[name="teacher"]').val().trim().split(" ").join("+"),a=e('.courses_search_input[name="category"]').val().trim().split(" ").join("+");if(e('.courses_search_input[name="coursesetup"]').length>0)var c=e('.courses_search_input[name="coursesetup"]').val().trim().split(" ").join("+");var s=e("#course-filter :selected").val();e("li").removeClass("active"),e(".dropdown-menu-tree").slideUp(),e("#load-course").load("/course/load_course.php?keyword="+t+"&teacher="+o+"&category="+a+"&coursesetup="+c+"&filter="+s,function(){e(".loading-page").removeClass("active")})});var a=e("#load-course").attr("category");void 0!==a?(e("#load-course").load("/course/load_course.php?id="+a),e("#drop-course-category .list-category[data="+a+"]").addClass("active")):e("#load-course").load("/course/load_course.php"),e(".list-category").click(function(){var t=e(this).attr("data");e(".list-category[data="+t+"] i").toggleClass("active"),e(".dropdown-menu-tree."+t).slideToggle()}),e(".list-subcategory").click(function(){var t=e(this).attr("id");e(".list-category#"+t).toggleClass("active"),e(".dropdown-menu-tree."+t).slideToggle()}),e(".checkall").click(function(){e("input.usercheckbox").prop("checked",this.checked)}),e("#course-filter").bind("change",function(){e(".loading-page").addClass("active"),e(".courses_search_input").val("");var t={type:"GET",processData:!0,data:{filter:e(this).val()},contenttype:"application/json"};e.ajax("/course/load_course.php",t).then(function(t){e("li").removeClass("active"),e(".dropdown-menu-tree").slideUp(),e("#load-course").hide().html(t).fadeIn("fast"),e(".loading-page").removeClass("active")})});var s={};e("#course-filter option").each(function(){s[this.value]&&e(this).remove(),s[this.value]=!0}),e("li.list-category").each(function(){e(this).parent(".dropdown-menu-tree").length&&e(this).css("background","transparent")}),(l={}).apiSettings={url:o+"search_category"},l.textfield="name",l.select=function(t){setTimeout(function(){e("#courses_search_button").click()},500)};var i=c.initSearchAutoComplete(l);e("#category").kendoAutoComplete(i),(l={}).apiSettings={url:o+"search_course"},l.textfield="fullname",l.select=function(t){setTimeout(function(){e("#courses_search_button").click()},500)};var r=c.initSearchAutoComplete(l);e("#keyword").kendoAutoComplete(r),(l={}).apiSettings={url:o+"search_teacher"},l.textfield="fullnamet",l.select=function(t){setTimeout(function(){e("#courses_search_button").click()},500)};var n=c.initSearchAutoComplete(l);if(e("#teacher").kendoAutoComplete(n),e("#coursesetup").length>0){var l;(l={}).apiSettings={url:o+"search_coursesetup"},l.textfield="coursesetup",l.select=function(t){setTimeout(function(){e("#courses_search_button").click()},500)};var u=c.initSearchAutoComplete(l);e("#coursesetup").kendoAutoComplete(u)}}}});