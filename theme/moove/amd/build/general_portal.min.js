require.config({paths:{iframetracker:"/theme/moove/js/jquery.iframetracker"}}),define(["jquery","core/config","theme_moove/handle_cookie","iframetracker"],function(e,o,i,r){"use strict";if(window.frameElement?i.setCookieSecure("spa","true"):i.setCookieSecure("spa","false"),e(document).ready(function(){e("body").removeClass("loading"),e("body a").bind("contextmenu",function(e){i.setCookieSecure("spa","-1",0),i.setCookieSecure("cookie","-1",0),i.setCookieSecure("ebmlms","-1",0)}),e("body a").on("click",function(e){(e.ctrlKey||e.shiftKey||e.metaKey||e.button&&1==e.button)&&(i.setCookieSecure("spa","-1",0),i.setCookieSecure("cookie","-1",0),i.setCookieSecure("ebmlms","-1",0))})}),window.onbeforeunload=function(){i.getCookie("baseUrl")&&i.setCookieSecure("baseUrl","-1",0),i.setCookieSecure("spa","-1",0),i.setCookieSecure("ebmlms","true");var e=window.location.pathname;["/course/view.php","/user/index.php","/badges/view.php","/admin/tool/lp/coursecompetencies.php","/grade/report/index.php","/contentbank/index.php"].includes(e)&&i.setCookieSecure("cookie","-1",0)},!i.getCookie("baseUrl")){var a=window.location.pathname;["/course/view.php","/user/index.php","/badges/view.php","/admin/tool/lp/coursecompetencies.php","/grade/report/index.php","/contentbank/index.php"].includes(a)&&i.setCookieSecure("baseUrl",window.location.href)}e("ul.nav-tabs.course li").click(function(o){var r;e(this).addClass("active").siblings().removeClass("active"),i.setCookieSecure("spa","true"),i.setCookieSecure("ebmlms","true"),i.setCookieSecure("baseUrl",window.location.href);var a=e(this).attr("data-page-url");if(a.includes("course/view.php")?e("#focus-mod.open-focusmod, #setting-context, #page-header .singlebutton").removeClass("d-none"):e("#focus-mod.open-focusmod, #setting-context, #page-header .singlebutton").addClass("d-none"),i.getCookie("baseUrl").includes(a))return e("#course-iframe").addClass("d-none"),e("#region-main .card-body").removeClass("d-none"),void i.setCookieSecure("spa","-1",0);var n='<iframe id="course-iframe" class="card" src="'+a+'" frameBorder="0"></iframe>';e("#general-iframe-view-coursepage").html(n),e("#region-main .card-body").addClass("d-none"),e("#region-main .loading-page").addClass("active"),e("#course-iframe").on("load",function(){e("#course-iframe").iframeTracker({blurCallback:function(o){e("body").focus()},outCallback:function(e,o){this._overId=null},_overId:null}),e("#course-iframe").removeClass("d-none"),null==r&&(r=iFrameResize({log:!1},"#course-iframe")),e("#region-main .loading-page").removeClass("active")})})});